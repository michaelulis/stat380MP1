---
title: "Mini-Project 1"
author: "Michael Ulis, Ayla Orona, Maeric Barrows"
date: "2024-03-28"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Front Matter
```{r loadPackages, message = FALSE, warning=FALSE}
#Load packages with groundhog to improve stability
library(tidyverse)
library(rvest)
library(ggplot2)
library(lubridate)
```

```{r}
COD1 <- read_html(
  x = "https://docs.google.com/spreadsheets/d/1Wv5dlzCYv37aY58MF9nuuYJbHRBWm_dQ/edit?usp=sharing&ouid=106338911046216482900&rtpof=true&sd=true"
) %>%
  html_elements(css = "table") %>%
  html_table()
```

```{r}
COD <- COD1[[1]]
```

```{r}
COD[COD == ""] <- NA
```

```{r}
colnames(COD) <- COD[1,]
COD <- COD[-1, ]
COD <- COD[-1, ]
```

```{r}
COD <- COD[,-1]
```

```{r}
COD$Eliminations <- as.numeric(COD$Eliminations)
COD$Deaths <- as.numeric(COD$Deaths)
COD$Score <- as.numeric(COD$Score)
COD$TotalXP <- as.numeric(COD$TotalXP)
COD$Damage <- as.numeric(COD$Damage)
```

## MAERIC. Primary Weapon
The PrimaryWeapon column represents the main weapon used in each Call of Duty game. PrimaryWeapon is a categorical variable. Each weapon is represented by their name in string form. In every game, a primary weapon is used, so there are no missing instances.

```{r Missing Instances of PrimaryWeapon}
sum(is.na(COD$PrimaryWeapon))
```

We can see the most common weapons used in this table and visualization.

```{r PrimaryWeapon Table}
table1 <- COD %>%
  group_by(PrimaryWeapon) %>%
  summarize(TimesPlayed=n()) %>%
  arrange(desc(TimesPlayed))
```

```{r}
ggplot(COD, aes(x = PrimaryWeapon)) +
  geom_bar(fill = "maroon") +
  labs(x = "Weapon Used",
       y = "Count")
```

We can learn that the player from whom this data was recorded uses the M16 the most, with 48 times played.

## MAERIC. Deaths
The Deaths column represents how many times the player gets killed by another during a match. Deaths is a numerical variable. This column does not have any missing instances.

```{r}
sum(is.na(COD$Deaths))
```
We can learn more about the Deaths variable by examining this table and visualization.

```{r}
COD %>%
  summarize(N=n(),
            mean=mean(Deaths),
            min=min(Deaths),
            median=median(Deaths),
            max=max(Deaths),
            sd=sd(Deaths))
```
Using this table, we learn that, on average, this player died 15 times per round. That is also the total number of deaths they achieved the most. At minimum, this player died 4 times in one match, but in their worst match, they suffered 42 deaths.

```{r}
ggplot(COD, aes(x=Deaths, y=TotalXP)) +
  geom_point(color = "#880808") +
  geom_smooth(method=lm, se=FALSE, color = "red") +
  labs(x = "Deaths",
       y = "Total XP")
```
This visualization compares the number of deaths per game to the total XP obtained in that game. As indicated by the graph, there is not a strong correlation in either direction between deaths and total XP.



POTENTIAL BIG QUESTION: How does map/weapon choice/score affect overall performance?


## Elimination Summary
```{r}
sum(is.na(COD$Eliminations))
```

```{r}

COD %>%
  summarize(N = n(),
            mean = mean(Eliminations),
            median= median(Eliminations),
            StandardD = sd(Eliminations),
            min = min(Eliminations),
            max = max(Eliminations))

```
The Eliminations variable is quantitative. The amount of missing data Eliminations has is 0 because you are guaranteed to get eliminated per game. The mean of Eliminations is 15.09005, the median is 14, the Standard Deviation is 6.133161, the minimum is 2, and the max is 39.

```{r}
ggplot(data = COD, mapping = aes(x = Eliminations))+
  geom_histogram(color = "black", fill = "#880808")
```

From this visualization we can learn the distribution of Eliminations of the data set, like the maximum amount and the minimum amount.

## Total XP Summary
```{r}
sum(is.na(COD$TotalXP))
```
```{r}
COD %>%
  summarize(N = n(),
            mean = mean(TotalXP),
            median = median(TotalXP),
            StandardD = sd(TotalXP),
            min = min(TotalXP),
            max = max(TotalXP))
```
The number of missing data for TotalXP is 0. The mean for TotalXP is 11975.4, the median is 10328, the standard deviation is 6166.652, the minimum TotalXP is 1935, and the max is 43816.

```{r}
ggplot(data = COD, mapping = aes(x = TotalXP))+
  geom_histogram(color = "black", fill = "#880808")
```

From this visualization we can learn the distributino of the TotalXP within this data set. 

## Map Choice

```{r}
choice_table <- COD %>%
  group_by(Choice) %>%
  summarise(N = n()) %>%
  arrange(desc(N))

choice_table
```

```{r}
ggplot(data = COD, mapping = aes(x = Choice)) +
  geom_bar() + 
  theme(axis.text.x = element_text(angle = 45, hjust=1))
```

## Score

```{r}
score_table <- COD %>%
  summarize(total_score = sum(Score, na.rm = TRUE),
            mean_score = mean(Score, na.rm = TRUE),
            median_score = median(Score, na.rm = TRUE),
            sd_score = sd(Score, na.rm = TRUE),
            min_score = min(Score, na.rm = TRUE),
            max_score = max(Score, na.rm = TRUE))

score_table
```

```{r}
ggplot(data = COD, mapping = aes(x = Choice, y = Score)) + 
  geom_boxplot() +
  theme(axis.text.x = element_text(angle = 45, hjust=1))
```

## Part 3: Questions to Ask (feel free to add more, we can choose the best ones from this set)
- What does the ratio in the Result column represent?
- How is Score calculated?
- How is Total XP calculated?
- What do the different values in GameType mean?
- Does this dataset represent the playing data for one player?

## Part 4a (I extracted month from the Date column)
```{r}
COD <- COD %>%
  mutate(month = month(as.POSIXlt(Date, format = "%m/%d/%Y")))
COD$month <- month.name[COD$month]
```
